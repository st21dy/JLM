<div id="articlehashtag">
  <section>
    
    <header class="text-center">
      <ul class="nav justify-content-center">
        <li class="nav-item shadow border">
          <%= link_to "投稿検索", search_articles_path, class: "nav-link" %>
        </li>
        <li class="nav-item shadow border">
          <%= link_to "投稿", new_article_path, class: "nav-link" %>
        </li>
      </ul>
    </header>
    
    <div class="article">
      <article class="d-flex flex-wrap justify-content-center">
        <% @articles.each do |article| %>
        <section class="border">
          <header class="icon">
            <%= attachment_image_tag article.user, :icon, :fill, 30, 30, format: 'jpeg', fallback: "no_image.jpg", class: "border border-dark rounded-circle" %>
            <%= article.user.name %>
          </header>
          
          <%= link_to article_path(article.id) do %>
            <!-- 動画と画像で表示を分ける-->
            <% if article.video? %>
              <% type = file_type(article.video.url)%> <!-- app/helpers/application_helper.rbにfile_typeを定義 -->
                <% if type == 'image' %>
                  <%= image_tag article.video.url, :size => "300x300" %>
                <% elsif type == 'video' %>
                  <%= video_tag article.video.url, autoplay: true, muted: true, controls: true, :size => "300x300" %>
                <% end %>
            <% end %>
          <% end %>
        
          <h4 class="text-center">
            <%= article.title %>
          </h4>
          
          <!-- いいね機能 -->
          <% if article.liked_by?(current_user) %>
            <p class="text-center">
              <%= link_to article_likes_path(article), class: "line", method: :delete do %>
                ❤️ いいね! <%= article.likes.count %>
              <% end %>
            </p>
          <% else %>
            <p class="text-center">
              <%= link_to article_likes_path(article), class: "line", method: :post do %>
                ❤️ いいね! <%= article.likes.count %>
              <% end %>
            </p>
          <% end %>
        </section>
        <% end %>
      </article>
    </div>
    
  </section>